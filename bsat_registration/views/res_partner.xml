<odoo>
    <record id="view_partner_form_bsat" model="ir.ui.view">
        <field name="name">res.partner.form.bsat</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">
            <xpath expr="//sheet/notebook" position="inside">

                <page string="Student Info">
                    <group>
                        <group>
                            <field name="fathers_name" />
                            <field name="whatsapp_number" />
                        </group>
                        <group>
                            <field name="registration_date" />
                            <field name="contact_type" />
                        </group>
                    </group>
                    <group>
                        <group>
                            <field name="aadhar_number" />
                            <field name="class_10th_per" />
                            <field name="class_10th_school" />
                            <field name="class_12th_status" />
                            <field name="class_12th_passing_year" />
                        </group>
                        <group>
                            <field name="class_12th_per" />
                            <field name="class_12th_roll" />
                            <field name="class_12th_school" />
                            <field name="class_12th_stream" />
                        </group>
                    </group>
                </page>
            </xpath>
        </field>
    </record>
</odoo>


<script>
    document.getElementById('myForm').addEventListener('submit', async function (event) {
    event.preventDefault();

    const formData = new FormData(event.target);
    const data = Object.fromEntries(formData);

    try {
    const response = await fetch('https://crm.bsat.online/submit_registration', {
    method: 'POST',
    mode: 'cors',
    headers: {
    'Content-Type': 'application/json',
    },
    body: JSON.stringify(data),
    });

    const result = await response.json();

    if (response.ok) {
    // Success case
    alert(result.message || 'Registration successful!');
    } else {
    // Handle error cases
    alert(result.error || 'An error occurred. Please try again.');
    }
    } catch (error) {
    alert('Failed to submit registration. Please try again later. Error: ' + error.message);
    }
    });
</script>
